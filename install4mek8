#Kubernetes
#Start out with: uninstalling  and reinstalling docker how we usually do it 

#Memory should be 8GB and at least runs 3 cpus, don't run as root

#visudo go into file and add an existing user with root permissions
visudo


sudo yum -y install epel-release
sudo yum -y update
sudo reboot

# if telnet is not installed: sudo yum -y telnet
sudo yum -y install apt-transport-https ca-certificates curl software-properties-comm dnf-plugins-core
sudo dnf install -y curl wget tar git
sudo dnf install dnf-plugins-core
sudo yum install -y yum-utils
sudo usermod -aG docker adam
sudo newgrp docker
curl -LO "https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl"
sudo install -o root -g root -m 0755 kubectl /usr/local/bin/kubectl
sudo chmod +x kubectl 
sudo mv kubectl /usr/local/bin/
curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64 
sudo install minikube-linux-amd64 /usr/local/bin/minikube
setenforce 0
firewall-cmd --add-port=8443/tcp --permanent
firewall-cmd --reload 
/usr/local/bin/minikube start --driver=docker
minikube status

kubectl get nodes
# if kubectl is not working for some reason try: sudo minikube kubectl -- get pods

# if network error still exists:
minikube start --cpus=3 --memory=6000 --driver=docker \
  --network-plugin=cni \
  --extra-config=kubelet.cgroup-driver=systemd \
  --force

